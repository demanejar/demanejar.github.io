<!DOCTYPE html><html lang="en-US" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta property="og:image" content="https://raw.githubusercontent.com/demanejar/image-collection/main/crawldataalonhadata/img_603b96633d2d0.png"> <script async src="https://www.googletagmanager.com/gtag/js?id=G-9TR0K3B846"></script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8714452693053438" crossorigin="anonymous"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-9TR0K3B846'); </script><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Crawl dữ liệu nhà đất từ alonhadat với Scrapy" /><meta name="author" content="trannguyenhan" /><meta property="og:locale" content="en_US" /><meta name="description" content="Trong bài viết này mình sẽ giới thiệu chi tiết về cách tạo một project với Scrapy và sử dụng để phân tích lấy dữ liệu nhà đất từ trang alonhadat. Nếu máy bạn chưa có Scrapy thì có thể cài đặt bằng pip, xem chi tiết tại website https://pypi.org/project/Scrapy/." /><meta property="og:description" content="Trong bài viết này mình sẽ giới thiệu chi tiết về cách tạo một project với Scrapy và sử dụng để phân tích lấy dữ liệu nhà đất từ trang alonhadat. Nếu máy bạn chưa có Scrapy thì có thể cài đặt bằng pip, xem chi tiết tại website https://pypi.org/project/Scrapy/." /><link rel="canonical" href="https://demanejar.github.io/posts/crawl-housing-data-from-alonhadat/" /><meta property="og:url" content="https://demanejar.github.io/posts/crawl-housing-data-from-alonhadat/" /><meta property="og:site_name" content="De Manejar" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-01-24T20:52:00+07:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Crawl dữ liệu nhà đất từ alonhadat với Scrapy" /><meta name="twitter:site" content="@DeManejar" /><meta name="twitter:creator" content="@trannguyenhan" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"trannguyenhan"},"dateModified":"2025-03-17T06:29:35+07:00","datePublished":"2023-01-24T20:52:00+07:00","description":"Trong bài viết này mình sẽ giới thiệu chi tiết về cách tạo một project với Scrapy và sử dụng để phân tích lấy dữ liệu nhà đất từ trang alonhadat. Nếu máy bạn chưa có Scrapy thì có thể cài đặt bằng pip, xem chi tiết tại website https://pypi.org/project/Scrapy/.","headline":"Crawl dữ liệu nhà đất từ alonhadat với Scrapy","mainEntityOfPage":{"@type":"WebPage","@id":"https://demanejar.github.io/posts/crawl-housing-data-from-alonhadat/"},"url":"https://demanejar.github.io/posts/crawl-housing-data-from-alonhadat/"}</script><title>Crawl dữ liệu nhà đất từ alonhadat với Scrapy | De Manejar</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://i.pinimg.com/564x/9c/32/79/9c3279b5ac960533cbcb7e833ac4d947.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">De Manejar</a></div><div class="site-subtitle font-italic">Hello Bigdata !</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/demanejar" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/DeManejar" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['demanejar','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Crawl dữ liệu nhà đất từ alonhadat với Scrapy</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Crawl dữ liệu nhà đất từ alonhadat với Scrapy</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> trannguyenhan </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Tue, Jan 24, 2023, 8:52 PM +0700" prep="on" > Jan 24, 2023 <i class="unloaded">2023-01-24T20:52:00+07:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Mon, Mar 17, 2025, 6:29 AM +0700" prefix="Updated " > Mar 17 <i class="unloaded">2025-03-17T06:29:35+07:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1609 words">8 min</span></div></div><div class="post-content"><p>Trong bài viết này mình sẽ giới thiệu chi tiết về cách tạo một project với <code class="language-plaintext highlighter-rouge">Scrapy</code> và sử dụng để phân tích lấy dữ liệu nhà đất từ trang alonhadat. Nếu máy bạn chưa có <code class="language-plaintext highlighter-rouge">Scrapy</code> thì có thể cài đặt bằng pip, xem chi tiết tại website <a href="https://pypi.org/project/Scrapy/">https://pypi.org/project/Scrapy/</a>.</p><blockquote><p>Nếu bạn quan tâm tới một luồng dữ liệu đầy đủ từ việc <code class="language-plaintext highlighter-rouge">crawl data</code> -&gt; <code class="language-plaintext highlighter-rouge">làm sạch</code> -&gt; <code class="language-plaintext highlighter-rouge">phân tích và trực quan hóa</code> -&gt; <code class="language-plaintext highlighter-rouge">học máy</code> -&gt; <code class="language-plaintext highlighter-rouge">website demo</code> thì có thể tham khảo repo <a href="https://github.com/trannguyenhan/house-price-prediction">https://github.com/trannguyenhan/house-price-prediction</a></p></blockquote><h2 id="tạo-một-project-scrapy">Tạo một project Scrapy</h2><p>Tạo một project Scrapy với câu lệnh:</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>scrapy startproject crawlerdata
</pre></table></code></div></div><p>Tạo một spider <code class="language-plaintext highlighter-rouge">alonhadat</code> bằng câu lệnh:</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>scrapy genspider alonhadat alonhadat.com.vn
</pre></table></code></div></div><h2 id="định-nghĩa-dữ-liệu-cần-lấy-về">Định nghĩa dữ liệu cần lấy về</h2><p>Định nghĩa rõ ràng các trường cần lấy về trong file <code class="language-plaintext highlighter-rouge">items.py</code>:</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="n">scrapy</span>


<span class="k">class</span> <span class="nc">DataPriceItem</span><span class="p">(</span><span class="n">scrapy</span><span class="p">.</span><span class="n">Item</span><span class="p">):</span>
    <span class="c1"># define the fields for your item here like:
</span>    <span class="c1"># name = scrapy.Field()
</span>    <span class="n">area</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># dien_tich \ double
</span>    <span class="n">address</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># dia_chi \ string
</span>    <span class="n">description</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># mo_ta \ string
</span>    <span class="n">floor_number</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># so_lau (so_tang) \ int
</span>    <span class="n">bedroom_number</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># so_phong_ngu \ int
</span>    <span class="n">is_dinning_room</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># co_phong_an? \ boolean
</span>    <span class="n">is_kitchen</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># co_bep? \ boolean
</span>    <span class="n">is_terrace</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># co_san_thuong? \ boolean
</span>    <span class="n">is_car_pack</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># co_cho_de_xe_hoi? \ boolean
</span>    <span class="n">is_owner</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># chinh_chu? \ boolean
</span>    <span class="n">start_date</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># ngay_dang_tin \ date || string
</span>    <span class="n">end_date</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># ngay_ket_thuc \ date || string
</span>    <span class="nb">type</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># in('nha_mat_tien', 'nha_trong_hem') \ string
</span>    <span class="n">direction</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># phuong_huong_nha (nam, bac, dong, tay) \ string
</span>    <span class="n">street_in_front_of_house</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># do_rong_duong_truoc_nha \ int
</span>    <span class="n">width</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># chieu_dai \ string
</span>    <span class="n">height</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># chieu_rong \ string
</span>    <span class="n">law</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># phap_ly \ string
</span>
    <span class="n">price</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># gia_nha \ double
</span></pre></table></code></div></div><p>Vì crawl data chỉ là bước đầu trong cả một luồng dữ liệu của chúng ta nên cần command để ghi lại rõ ràng các trường tránh nhầm lẫn về sau và cũng để sau nhìn lại sẽ dễ dàng hiểu và tiếp cận project hơn.</p><p>Với project đơn giản đầu tiên này thì chưa cần quan tâm tới các file <code class="language-plaintext highlighter-rouge">middlelwares.py</code> hay <code class="language-plaintext highlighter-rouge">pipelines.py</code>. Code trong các file này tạm thời để mặc định.</p><h2 id="chỉnh-sửa-file-settingspy">Chỉnh sửa file <code class="language-plaintext highlighter-rouge">settings.py</code></h2><p>Chỉnh sửa lại file <code class="language-plaintext highlighter-rouge">settings.py</code>:</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="n">BOT_NAME</span> <span class="o">=</span> <span class="sh">'</span><span class="s">data_price</span><span class="sh">'</span>

<span class="n">SPIDER_MODULES</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">data_price.spiders</span><span class="sh">'</span><span class="p">]</span>
<span class="n">NEWSPIDER_MODULE</span> <span class="o">=</span> <span class="sh">'</span><span class="s">data_price.spiders</span><span class="sh">'</span>

<span class="c1"># Obey robots.txt rules
</span><span class="n">ROBOTSTXT_OBEY</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">DEFAULT_REQUEST_HEADERS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="sh">'</span><span class="s">User-Agent</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Mozilla/5.0 (X11; Linux x86_64; rv:48.0) Gecko/20100101 Firefox/48.0</span><span class="sh">'</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">FEED_EXPORT_ENCODING</span> <span class="o">=</span> <span class="sh">'</span><span class="s">utf-8</span><span class="sh">'</span>
</pre></table></code></div></div><p>Nếu chương trình <code class="language-plaintext highlighter-rouge">Scrapy</code> của bạn mới tạo có biến <code class="language-plaintext highlighter-rouge">ROBOTSTXT = False</code> thì hãy gán lại nó bằng <code class="language-plaintext highlighter-rouge">True</code> nha, lý do cụ thể thì có thể xem lại bài viết trước của mình <a href="https://demanejar.github.io/posts/what-is-crawler-and-something/#s%E1%BB%AD-d%E1%BB%A5ng-file-robotstxt">https://demanejar.github.io/posts/what-is-crawler-and-something/#s%E1%BB%AD-d%E1%BB%A5ng-file-robotstxt</a></p><h2 id="viết-spider-phân-tích-html-website">Viết Spider phân tích HTML website</h2><p>Trong <code class="language-plaintext highlighter-rouge">AlonhadatSpider</code> chúng ta sẽ cần phải viết 3 hàm: <code class="language-plaintext highlighter-rouge">start_requests</code>, <code class="language-plaintext highlighter-rouge">parse_link</code>, <code class="language-plaintext highlighter-rouge">parse</code>.</p><h3 id="hàm-start_requests">hàm <code class="language-plaintext highlighter-rouge">start_requests</code></h3><p>Hàm này là hàm sẽ được chạy đầu tiên và chúng sẽ có nhiệm vụ khởi tạo các link cần crawl. Nói thế này hơi khó hiểu, ví dụ này đi, ví dụ bạn cần crawl trang <code class="language-plaintext highlighter-rouge">alonhadat</code> từ trang 3501 tới trng 4501 thì trước hết là cần phải phân tích xem website này các url được thiết kế thế nào. Vào website xem thử 1 số trang:</p><div class="language-text highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>https://alonhadat.com.vn/nha-dat/can-ban.html
https://alonhadat.com.vn/nha-dat/can-ban/trang--2.html
https://alonhadat.com.vn/nha-dat/can-ban/trang--3.html
</pre></table></code></div></div><p>Từ trên tạm kết luận là url của website nay giữa các page 1,2 sẽ dạng <code class="language-plaintext highlighter-rouge">../trang--i.html</code>, từ suy đoán đó thì chúng ta viết hàm <code class="language-plaintext highlighter-rouge">start_requests</code>:</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">start_requests</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
    <span class="n">pages</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">3501</span><span class="p">,</span><span class="mi">4501</span><span class="p">):</span>
        <span class="n">domain</span> <span class="o">=</span> <span class="sh">'</span><span class="s">https://alonhadat.com.vn/can-ban-nha/trang--{}.htm</span><span class="sh">'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">pages</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="n">pages</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Request</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">page</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">self</span><span class="p">.</span><span class="n">parse_link</span><span class="p">)</span>
</pre></table></code></div></div><p>Vậy là đã khởi tạo xong các link cần crawl, giờ mỗi link được tạo sẽ là đầu vào cho hàm <code class="language-plaintext highlighter-rouge">parse_link</code>.</p><h3 id="hàm-parse_link">Hàm <code class="language-plaintext highlighter-rouge">parse_link</code></h3><p>Nhiệm vụ của hàm này là lấy toàn bộ các link bài viết ở trong từng trang listing bài viết được tạo ở hàm <code class="language-plaintext highlighter-rouge">start_requests</code>, ví dụ khi vào một trang lising bài viết như sau:</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://raw.githubusercontent.com/demanejar/image-collection/main/scrapy-first/alonhadat.png" alt="" /></p><p>Kết quả cần đạt được là list các link bài viết kia:</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="p">[</span>
  <span class="sh">'</span><span class="s">https://alonhadat.com.vn/cho-thue-nha-o-duong-nguyen-van-bua-xa-xuan-thoi-son-huyen-hm-12662015.html</span><span class="sh">'</span><span class="p">,</span>
  <span class="sh">'</span><span class="s">https://alonhadat.com.vn/cho-thue-khach-san-8-tang-30phong-mt-khu-pham-van-dong-12682000.html</span><span class="sh">'</span><span class="p">,</span>
  <span class="bp">...</span>
<span class="p">]</span>
</pre></table></code></div></div><p>Chuột phải vào <code class="language-plaintext highlighter-rouge">element</code> cần lấy <code class="language-plaintext highlighter-rouge">xpath</code> hoặc <code class="language-plaintext highlighter-rouge">css selector</code> (với <code class="language-plaintext highlighter-rouge">xpath</code> hay <code class="language-plaintext highlighter-rouge">css selector</code> thì cũng giống nhau thôi, mình thì thích dùng <code class="language-plaintext highlighter-rouge">css selector</code> hơn nên từ giờ mình sẽ chủ yếu đề cập tới <code class="language-plaintext highlighter-rouge">css selector</code>) để lấy <code class="language-plaintext highlighter-rouge">css selector</code> của phần từ:</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://raw.githubusercontent.com/demanejar/image-collection/main/scrapy-first/get_xpath_or_css_selector.png" alt="" /></p><p>Với trường hợp này, thì <code class="language-plaintext highlighter-rouge">css selector</code> của phần tử chứa url bài viết đầu tiên là (là 1 <code class="language-plaintext highlighter-rouge">element</code> tag <code class="language-plaintext highlighter-rouge">a</code>):</p><div class="language-text highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>#left &gt; div.content-items &gt; div:nth-child(1) &gt; div:nth-child(1) &gt; div.ct_title &gt; a
</pre></table></code></div></div><p>Trong <code class="language-plaintext highlighter-rouge">Scrapy</code> để lấy thêm thuộc tính thì chúng ta thêm <code class="language-plaintext highlighter-rouge">::attr(href)</code> với <code class="language-plaintext highlighter-rouge">href</code> là thuộc tính của <code class="language-plaintext highlighter-rouge">element</code> đó, vậy để lấy được url chứa trong thuôc tính <code class="language-plaintext highlighter-rouge">href</code> của tag <code class="language-plaintext highlighter-rouge">a</code> thì <code class="language-plaintext highlighter-rouge">css selector</code> sẽ thêm như sau:</p><div class="language-text highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>#left &gt; div.content-items &gt; div:nth-child(1) &gt; div:nth-child(1) &gt; div.ct_title &gt; a::attr(href)
</pre></table></code></div></div><blockquote><p><strong>Lưu ý</strong>: tiện đây mình cũng lưu ý luôn về việc lấy <code class="language-plaintext highlighter-rouge">CSS SELECTOR</code> kiểu này. Đầu tiên là nó rất dễ thay đổi, tiếp là lấy kiểu này bạn sẽ chỉ lấy được của một phần từ bạn cần lấy, trong các bài viết sau mình sẽ hướng dẫn mọi người các lấy <code class="language-plaintext highlighter-rouge">css selector</code> của từng phần từ bằng việc phân tích các thuộc tính độc nhất của phần từ đó hoặc các phần tử liền kề, còn với bài viết này chúng ta sẽ đi tiếp với cách này.</p></blockquote><p>Đây mới là <code class="language-plaintext highlighter-rouge">css selector</code> của url bài viết đầu tiên, các url bài viết tiếp theo thì sau, chúng ta làm tương tự như vậy sẽ có một danh sách <code class="language-plaintext highlighter-rouge">css selector</code> chứa các url bài viết như sau:</p><div class="language-text highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>#left &gt; div.content-items &gt; div:nth-child(1) &gt; div:nth-child(1) &gt; div.ct_title &gt; a::attr(href)
#left &gt; div.content-items &gt; div:nth-child(2) &gt; div:nth-child(1) &gt; div.ct_title &gt; a::attr(href)
#left &gt; div.content-items &gt; div:nth-child(3) &gt; div:nth-child(1) &gt; div.ct_title &gt; a::attr(href)
#left &gt; div.content-items &gt; div:nth-child(4) &gt; div:nth-child(1) &gt; div.ct_title &gt; a::attr(href)
</pre></table></code></div></div><p>Tạm dự đoán được cấu trúc của <code class="language-plaintext highlighter-rouge">css selector</code> chứa link bài viết, chúng ta sẽ viết hàm <code class="language-plaintext highlighter-rouge">parse_link</code> như sau:</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">parse_link</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">21</span><span class="p">):</span>
        <span class="nb">str</span> <span class="o">=</span> <span class="sh">'</span><span class="s">#left &gt; div.content-items &gt; div:nth-child({}) &gt; div:nth-child(1) &gt; div.ct_title &gt; a::attr(href)</span><span class="sh">'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">link</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="nf">css</span><span class="p">(</span><span class="nb">str</span><span class="p">).</span><span class="nf">extract_first</span><span class="p">()</span>
        <span class="n">link</span> <span class="o">=</span> <span class="sh">'</span><span class="s">https://alonhadat.com.vn/</span><span class="sh">'</span> <span class="o">+</span> <span class="n">link</span>

        <span class="k">yield</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Request</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">link</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">self</span><span class="p">.</span><span class="n">parse</span><span class="p">)</span>
</pre></table></code></div></div><p>Tại sao lại là <code class="language-plaintext highlighter-rouge">range(1, 21)</code>, cũng dựa vào việc phân tích website thì sẽ thấy một trang listing bài viết sẽ có 21 bài viết. Bây giờ mỗi url bài viết sẽ là đầu vào cho hàm <code class="language-plaintext highlighter-rouge">parse</code>, nhiệm vụ tiếp theo là phân tích và lấy những dữ liệu cần thiết đã được định nghĩa trong <code class="language-plaintext highlighter-rouge">class</code> <code class="language-plaintext highlighter-rouge">Item</code>.</p><h3 id="hàm-parse">Hàm <code class="language-plaintext highlighter-rouge">parse</code></h3><p>Với cách lấy <code class="language-plaintext highlighter-rouge">css selector</code> như trên thì chúng ta cũng viết nhanh được hàm <code class="language-plaintext highlighter-rouge">parse</code> như sau:</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">item</span> <span class="o">=</span> <span class="nc">DataPriceItem</span><span class="p">()</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">price</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">extract</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="sh">'</span><span class="s">#left &gt; div.property &gt; div.moreinfor &gt; span.price &gt; span.value</span><span class="sh">'</span><span class="p">)</span>

    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">description</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">extract</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="sh">'</span><span class="s">#left &gt; div.property &gt; div.detail.text-content</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">address</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">extract</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="sh">'</span><span class="s">#left &gt; div.property &gt; div.address &gt; span.value</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">area</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">extract</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="sh">'</span><span class="s">#left &gt; div.property &gt; div.moreinfor &gt; span.square &gt; span.value</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">start_date</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">extract</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="sh">'</span><span class="s">#left &gt; div.property &gt; div.title &gt; span</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">start_date</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">end_date</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="n">result_table</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">extract_table</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="nf">css</span><span class="p">(</span><span class="sh">'</span><span class="s">table</span><span class="sh">'</span><span class="p">).</span><span class="nf">get</span><span class="p">())</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">floor_number</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_table</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">bedroom_number</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_table</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">is_dinning_room</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_table</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">is_kitchen</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_table</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">is_terrace</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_table</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">is_car_pack</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_table</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">is_owner</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_table</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">type</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_table</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">direction</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_table</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">street_in_front_of_house</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_table</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">width</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_table</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">height</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_table</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">law</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_table</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span>

    <span class="k">yield</span> <span class="n">item</span>
</pre></table></code></div></div><p>Ở hàm này chúng ta phải khai báo một <code class="language-plaintext highlighter-rouge">DataPriceItem</code> và trả về đối tượng đó để luồng của <code class="language-plaintext highlighter-rouge">Scrapy</code> được chạy thông suốt. Với hàm <code class="language-plaintext highlighter-rouge">extract</code> hay <code class="language-plaintext highlighter-rouge">extract_table</code> là các hàm viết thêm để tái sử dụng lại code.</p><p>Để xem code chi tiết của project bạn có thể xem tại repo project của Demanejar: <a href="https://github.com/demanejar/crawl-alonhadat">https://github.com/demanejar/crawl-alonhadat</a>.</p><p>Trong dự án mình còn sử dụng thêm 1 thư viện <code class="language-plaintext highlighter-rouge">BeautifulSoup</code> đê phân tích mã HTML (được sử dụng trong hàm <code class="language-plaintext highlighter-rouge">extract_table</code>, bạn có thể vào trong repo qua github để xem chi tiết). <code class="language-plaintext highlighter-rouge">BeautifulSoup</code> cũng là một thư viện khá nổi tiếng để lấy và phân tích thông tin từ website, tuy nhiên thì với mình thì <code class="language-plaintext highlighter-rouge">BeautifulSoup</code> mạnh hơn ở phương diện phân tích mã HTML và mình cũng hay sử dụng <code class="language-plaintext highlighter-rouge">BeautifulSoup</code> trong <code class="language-plaintext highlighter-rouge">Scrapy</code> để phân tích một số đoạn mã HTML.</p><h2 id="chạy-scrapy">Chạy Scrapy</h2><p>Cuối cùng sau khi viết xong thì chạy project để lấy dữ liệu thôi, chạy command:</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>scrapy crawl alonhadat <span class="nt">-o</span> ../data/output.json <span class="nt">--set</span> <span class="nv">FEED_EXPORT_ENCODING</span><span class="o">=</span>utf-8
</pre></table></code></div></div><p>Dữ liệu thô crawl về bạn có thể tham khảo tại: <a href="https://github.com/trannguyenhan/house-price-prediction/tree/master/data">https://github.com/trannguyenhan/house-price-prediction/tree/master/data</a>.</p><p>Hiện tại thì <code class="language-plaintext highlighter-rouge">alonhadat</code> đang có một số biện pháp để tránh bị crawl, với bài viết này mình cũng chưa đề cập tới việc làm sao để vượt được sự ngăn chặn này của <code class="language-plaintext highlighter-rouge">alonhadat</code>, mình sẽ đề cập thêm ở các bài viết sau trong series này. Với bài viết này chỉ là cách phân tích và lấy dữ liệu của website. Với các repo được đề cập tới trong bài viết, nếu các bạn thấy hữu ích có thể cho các repo 1 star nha, cảm ơn mọi người! Bài viết này mình cũng kết thúc ở đây thôi.</p><p>Vì website không có mục bình luận dưới bài viết nên mọi người thảo luận và góp ý cho mình tại GITHUB DISCUSSION này nha: <a href="https://github.com/orgs/demanejar/discussions/1">https://github.com/orgs/demanejar/discussions/1</a>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/crawler/'>Crawler</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/crawler/" class="post-tag no-text-decoration" >Crawler</a> <a href="/tags/scrapy/" class="post-tag no-text-decoration" >Scrapy</a> <a href="/tags/alonhadat/" class="post-tag no-text-decoration" >alonhadat</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Crawl dữ liệu nhà đất từ alonhadat với Scrapy - De Manejar&url=https://demanejar.github.io/posts/crawl-housing-data-from-alonhadat/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Crawl dữ liệu nhà đất từ alonhadat với Scrapy - De Manejar&u=https://demanejar.github.io/posts/crawl-housing-data-from-alonhadat/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Crawl dữ liệu nhà đất từ alonhadat với Scrapy - De Manejar&url=https://demanejar.github.io/posts/crawl-housing-data-from-alonhadat/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/k8s/">Tìm hiểu tổng quan k8s</a><li><a href="/posts/add-proxy-to-scrapy-project/">Cấu hình proxy cho project Scrapy</a><li><a href="/posts/crawl-1000-website-new-with-scrapy/">Crawl 1000 trang báo với Scrapy và MySQL</a><li><a href="/posts/php-scraper/">PHP Scraper</a><li><a href="/posts/scrapy-shell/">Giới thiệu Scrapy Shell</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/bigdata/">Bigdata</a> <a class="post-tag" href="/tags/spark/">Spark</a> <a class="post-tag" href="/tags/crawler/">Crawler</a> <a class="post-tag" href="/tags/hdfs/">HDFS</a> <a class="post-tag" href="/tags/scrapy/">Scrapy</a> <a class="post-tag" href="/tags/hadoop/">Hadoop</a> <a class="post-tag" href="/tags/apache-hadoop/">Apache Hadoop</a> <a class="post-tag" href="/tags/ubuntu/">Ubuntu</a> <a class="post-tag" href="/tags/spark-sql/">Spark SQL</a> <a class="post-tag" href="/tags/alonhadat/">alonhadat</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/add-proxy-to-scrapy-project/"><div class="card-body"> <span class="timeago small" > Feb 15, 2023 <i class="unloaded">2023-02-15T20:52:00+07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Cấu hình proxy cho project Scrapy</h3><div class="text-muted small"><p> Proxy chắc là khái niệm đã không còn xa lạ gì với tất cả mọi người. Với người làm về crawl dữ liệu thì proxy như vật bất ly thân. Trong bài viết này, mình sẽ hướng dẫn cách cấu hình proxy cho proje...</p></div></div></a></div><div class="card"> <a href="/posts/crawl-1000-website-new-with-scrapy/"><div class="card-body"> <span class="timeago small" > Mar 1, 2023 <i class="unloaded">2023-03-01T20:52:00+07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Crawl 1000 trang báo với Scrapy và MySQL</h3><div class="text-muted small"><p> Nếu với mỗi website lại viết 1 spider để phân tích thông tin thì sẽ rất mất thời gian, nhất là với các website tin tức, có hàng ngàn các website tin tức khác nhau và chúng còn mọc ra mỗi ngày. Vậy...</p></div></div></a></div><div class="card"> <a href="/posts/scrapy-shell/"><div class="card-body"> <span class="timeago small" > Apr 1, 2023 <i class="unloaded">2023-04-01T20:52:00+07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Giới thiệu Scrapy Shell</h3><div class="text-muted small"><p> Mỗi lần viết 1 spider chúng ta phải viết nhiều các đoạn css selector, xpath để phân tích thông tin mà nhiều lúc không biết nó đúng hay sai. Mỗi lần như vậy thì lại phải chạy project rồi in ra thông...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/no-need-protected-website-from-scraping/" class="btn btn-outline-primary" prompt="Older"><p>Tại sao những người làm website không hoàn toàn muốn bảo vệ website của họ khỏi bị crawl?</p></a> <a href="/posts/add-proxy-to-scrapy-project/" class="btn btn-outline-primary" prompt="Newer"><p>Cấu hình proxy cho project Scrapy</p></a></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/DeManejar">demanejar</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div></div><script type="text/javascript"> var links = document.links; for (var i = 0, linksLength = links.length; i < linksLength; i++) { if (links[i].hostname != window.location.hostname) { links[i].target = '_blank'; } } </script></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/bigdata/">Bigdata</a> <a class="post-tag" href="/tags/spark/">Spark</a> <a class="post-tag" href="/tags/crawler/">Crawler</a> <a class="post-tag" href="/tags/hdfs/">HDFS</a> <a class="post-tag" href="/tags/scrapy/">Scrapy</a> <a class="post-tag" href="/tags/hadoop/">Hadoop</a> <a class="post-tag" href="/tags/apache-hadoop/">Apache Hadoop</a> <a class="post-tag" href="/tags/ubuntu/">Ubuntu</a> <a class="post-tag" href="/tags/spark-sql/">Spark SQL</a> <a class="post-tag" href="/tags/alonhadat/">alonhadat</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { let initTheme = "default"; if ($("html[mode=dark]").length > 0 || ($("html[mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://demanejar.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
