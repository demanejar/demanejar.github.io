<!DOCTYPE html><html lang="en-US" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <script async src="https://www.googletagmanager.com/gtag/js?id=G-9TR0K3B846"></script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8714452693053438" crossorigin="anonymous"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-9TR0K3B846'); </script><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Đa luồng và đa tiến trình trong Python" /><meta name="author" content="viethoang" /><meta property="og:locale" content="en_US" /><meta name="description" content="Trong một lần phỏng vấn mình có được hỏi về các khái niệm này, lúc đó do kiến thức mình hiểu có phần bị sai vì thế mình quyết định là tìm hiểu lại và viết lại một số vấn đề trong lập trình đa luồng và đa tiến trình trong Python" /><meta property="og:description" content="Trong một lần phỏng vấn mình có được hỏi về các khái niệm này, lúc đó do kiến thức mình hiểu có phần bị sai vì thế mình quyết định là tìm hiểu lại và viết lại một số vấn đề trong lập trình đa luồng và đa tiến trình trong Python" /><link rel="canonical" href="https://demanejar.github.io/posts/Multithread-Multiprocess-in-Python/" /><meta property="og:url" content="https://demanejar.github.io/posts/Multithread-Multiprocess-in-Python/" /><meta property="og:site_name" content="De Manejar" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-09-20T14:52:00+07:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Đa luồng và đa tiến trình trong Python" /><meta name="twitter:site" content="@DeManejar" /><meta name="twitter:creator" content="@viethoang" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"viethoang"},"dateModified":"2025-03-17T06:29:35+07:00","datePublished":"2021-09-20T14:52:00+07:00","description":"Trong một lần phỏng vấn mình có được hỏi về các khái niệm này, lúc đó do kiến thức mình hiểu có phần bị sai vì thế mình quyết định là tìm hiểu lại và viết lại một số vấn đề trong lập trình đa luồng và đa tiến trình trong Python","headline":"Đa luồng và đa tiến trình trong Python","mainEntityOfPage":{"@type":"WebPage","@id":"https://demanejar.github.io/posts/Multithread-Multiprocess-in-Python/"},"url":"https://demanejar.github.io/posts/Multithread-Multiprocess-in-Python/"}</script><title>Đa luồng và đa tiến trình trong Python | De Manejar</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://i.pinimg.com/564x/9c/32/79/9c3279b5ac960533cbcb7e833ac4d947.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">De Manejar</a></div><div class="site-subtitle font-italic">Hello Bigdata !</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/demanejar" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/DeManejar" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['demanejar','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Đa luồng và đa tiến trình trong Python</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Đa luồng và đa tiến trình trong Python</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> viethoang </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Mon, Sep 20, 2021, 2:52 PM +0700" prep="on" > Sep 20, 2021 <i class="unloaded">2021-09-20T14:52:00+07:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Mon, Mar 17, 2025, 6:29 AM +0700" prefix="Updated " > Mar 17 <i class="unloaded">2025-03-17T06:29:35+07:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1560 words">8 min</span></div></div><div class="post-content"><p>Trong một lần phỏng vấn mình có được hỏi về các khái niệm này, lúc đó do kiến thức mình hiểu có phần bị sai vì thế mình quyết định là tìm hiểu lại và viết lại một số vấn đề trong lập trình đa luồng và đa tiến trình trong Python</p><h1 id="1-một-số-khái-niệm-cơ-bản">1. Một số khái niệm cơ bản</h1><h2 id="tiến-trình-process">Tiến trình (Process)</h2><p>Tiến trình đơn giản có thể hiểu là một chương trình đang được thực thi. Khi chương trình được đưa vào bộ nhớ nó thành tiến trình và được chia thành các 4 phần stack, heap,text,data. Các tiến trình chạy trong không gian riêng biệt lẫn nhau</p><p>Mỗi tiến trình trong hệ điều hành được biểu diễn bằng 1 cấu trúc dữ liệu gọi là PCB bao gồm tất cả các thông tin của tiến trình</p><div class="table-wrapper"><table><thead><tr><th style="text-align: center"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://raw.githubusercontent.com/demanejar/image-collection/refs/heads/main/PythonMultiThreadMultiProcessing/process-control-block.png" alt="" /><tbody><tr><td style="text-align: center"><em>Các thông tin chứa trong PCB</em></table></div><h2 id="luồng-thread">Luồng (Thread)</h2><p>Luồng là một đơn vị thực thi trong một tiến trình. Một tiến trình có thể có một hay nhiều luồng. Các luồng không độc lập với nhau mà có thể chia sẻ phần tài nguyên và dữ liệu cho nhau.</p><div class="table-wrapper"><table><thead><tr><th style="text-align: center"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://raw.githubusercontent.com/demanejar/image-collection/refs/heads/main/PythonMultiThreadMultiProcessing/what-is-a-thread-in-os-and-what-are-the-differences-between-a-process-and-a-thread-single-threaded-and-multiple-threaded-process-83d094ff508aaf5f.jpg" alt="" /><tbody><tr><td style="text-align: center"><em>Luồng trong tiến trình</em></table></div><h2 id="đồng-bộ-hóa-synchronization">Đồng bộ hóa (Synchronization)</h2><p>Vấn đề đồng bộ hóa được chia thành hai dạng:</p><ul><li><p>Đồng bộ hóa tài nguyên: Xác định việc truy cập vào tài nguyên dùng chung có an toàn không</p><li><p>Đồng bộ hóa hoạt động: Đảm bảo việc thực thi các tác vụ chính xác khi phối hợp cùng nhau</p></ul><h1 id="2-lập-trình-đa-luồng-và-đa-tiến-trình-trong-python">2. Lập trình đa luồng và đa tiến trình trong Python</h1><h2 id="phân-biệt-đồng-thời-concurrency-và-song-song-parallelism">Phân biệt đồng thời (concurrency) và song song (parallelism)</h2><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://raw.githubusercontent.com/demanejar/image-collection/refs/heads/main/PythonMultiThreadMultiProcessing/concurrency-and-parallelism-are-different.jpg" alt="" /></p><ul><li><p>Lập trình đồng thời chỉ việc 2 hay nhiều tiến trình được xử lý xen kẽ thông qua cơ chế context switch trên 1 core CPU</p><li><p>Lập trình song song tức là 2 hay nhiều tiến trình được xử lý song song với nhau trên nhiều core CPU</p></ul><h3 id="io-và-cpu-bound">IO và CPU bound</h3><ul><li><p>CPU-bound chỉ việc chương trình sử dụng CPU phần lớn (tính toán). Việc tăng tốc những chương trình dạng này tức là làm sao để có thể thực hiện nhiều phép tính toán hơn trong cùng 1 khoảng thời gian</p><li><p>IO-bound chỉ việc thời gian thực hiện chương trình phần lớn là do thời gian đợi các tác vụ IO hoàn tất ví dụ đọc ghi từ ổ đĩa, bàn phím hay mạng. Khi đó CPU sẽ không được sử dụng</p></ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://raw.githubusercontent.com/demanejar/image-collection/refs/heads/main/PythonMultiThreadMultiProcessing/image-20.jpg" alt="" /></p><h2 id="cơ-chế-gil-trong-python">Cơ chế GIL trong Python</h2><p>Cơ chế GIL hay gọi là Global Intepreter Lock là một cơ chế trong python khóa toàn bộ trình thông dịch chỉ cho phép một luồng duy nhất được thực hiện. Do đó tại một thời điểm chỉ có một luồng được thực thi. Mỗi luồng muốn được thực thi thì GIL phải giải phóng luồng trước đó.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://raw.githubusercontent.com/demanejar/image-collection/refs/heads/main/PythonMultiThreadMultiProcessing/0_-byBEYjCl3q0yLZ-.png" alt="" /></p><p>Vậy nên cơ chế này sẽ khiến các mô hình lập trình đa luồng không tăng hiệu suất mà có thể bị giảm hiệu suất.</p><h1 id="3-thử-nghiệm-đánh-giá-các-mô-hình">3. Thử nghiệm đánh giá các mô hình</h1><p>Chạy chương trình python dưới đây bao gồm 2 hàm là IO-bound và CPU-bound thực hiện tác vụ tương ứng với tên hàm:</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="n">time</span><span class="p">,</span> <span class="n">os</span>
<span class="kn">from</span> <span class="n">threading</span> <span class="kn">import</span> <span class="n">Thread</span><span class="p">,</span> <span class="n">current_thread</span>
<span class="kn">from</span> <span class="n">multiprocessing</span> <span class="kn">import</span> <span class="n">Process</span><span class="p">,</span> <span class="n">current_process</span>


<span class="n">COUNT</span> <span class="o">=</span> <span class="mi">200000000</span>
<span class="n">SLEEP</span> <span class="o">=</span> <span class="mi">10</span>

<span class="k">def</span> <span class="nf">io_bound</span><span class="p">(</span><span class="n">sec</span><span class="p">):</span>

	<span class="n">pid</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="nf">getpid</span><span class="p">()</span>
	<span class="n">threadName</span> <span class="o">=</span> <span class="nf">current_thread</span><span class="p">().</span><span class="n">name</span>
	<span class="n">processName</span> <span class="o">=</span> <span class="nf">current_process</span><span class="p">().</span><span class="n">name</span>

	<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">pid</span><span class="si">}</span><span class="s"> * </span><span class="si">{</span><span class="n">processName</span><span class="si">}</span><span class="s"> * </span><span class="si">{</span><span class="n">threadName</span><span class="si">}</span><span class="s"> </span><span class="se">\
</span><span class="s">		---&gt; Start sleeping...</span><span class="sh">"</span><span class="p">)</span>
	<span class="n">time</span><span class="p">.</span><span class="nf">sleep</span><span class="p">(</span><span class="n">sec</span><span class="p">)</span>
	<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">pid</span><span class="si">}</span><span class="s"> * </span><span class="si">{</span><span class="n">processName</span><span class="si">}</span><span class="s"> * </span><span class="si">{</span><span class="n">threadName</span><span class="si">}</span><span class="s"> </span><span class="se">\
</span><span class="s">		---&gt; Finished sleeping...</span><span class="sh">"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">cpu_bound</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>

	<span class="n">pid</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="nf">getpid</span><span class="p">()</span>
	<span class="n">threadName</span> <span class="o">=</span> <span class="nf">current_thread</span><span class="p">().</span><span class="n">name</span>
	<span class="n">processName</span> <span class="o">=</span> <span class="nf">current_process</span><span class="p">().</span><span class="n">name</span>

	<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">pid</span><span class="si">}</span><span class="s"> * </span><span class="si">{</span><span class="n">processName</span><span class="si">}</span><span class="s"> * </span><span class="si">{</span><span class="n">threadName</span><span class="si">}</span><span class="s"> </span><span class="se">\
</span><span class="s">		---&gt; Start counting...</span><span class="sh">"</span><span class="p">)</span>

	<span class="k">while</span> <span class="n">n</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
		<span class="n">n</span> <span class="o">-=</span> <span class="mi">1</span>

	<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">pid</span><span class="si">}</span><span class="s"> * </span><span class="si">{</span><span class="n">processName</span><span class="si">}</span><span class="s"> * </span><span class="si">{</span><span class="n">threadName</span><span class="si">}</span><span class="s"> </span><span class="se">\
</span><span class="s">		---&gt; Finished counting...</span><span class="sh">"</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span><span class="o">==</span><span class="sh">"</span><span class="s">__main__</span><span class="sh">"</span><span class="p">:</span>
	<span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span>

	<span class="c1"># YOUR CODE SNIPPET HERE
</span>
	<span class="n">end</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span>
	<span class="nf">print</span><span class="p">(</span><span class="sh">'</span><span class="s">Time taken in seconds -</span><span class="sh">'</span><span class="p">,</span> <span class="n">end</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>

</pre></table></code></div></div><h2 id="thử-nghiệm-mô-hình-với-các-tác-vụ-io-bound">Thử nghiệm mô hình với các tác vụ IO-bound</h2><p>Gọi 2 lần hàm <code class="language-plaintext highlighter-rouge">io_bound()</code>:</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nf">io_bound</span><span class="p">(</span><span class="n">SLEEP</span><span class="p">)</span>
<span class="nf">io_bound</span><span class="p">(</span><span class="n">SLEEP</span><span class="p">)</span>
</pre></table></code></div></div><p>Chương trình sẽ có thời gian chạy hơn 20s với 20s là sleep thực hiện tuần tự. Kết quả như dưới đây:</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>18795 <span class="k">*</span> MainProcess <span class="k">*</span> MainThread         <span class="nt">---</span><span class="o">&gt;</span> Start sleeping...
18795 <span class="k">*</span> MainProcess <span class="k">*</span> MainThread         <span class="nt">---</span><span class="o">&gt;</span> Finished sleeping...
18795 <span class="k">*</span> MainProcess <span class="k">*</span> MainThread         <span class="nt">---</span><span class="o">&gt;</span> Start sleeping...
18795 <span class="k">*</span> MainProcess <span class="k">*</span> MainThread         <span class="nt">---</span><span class="o">&gt;</span> Finished sleeping...
Time taken <span class="k">in </span>seconds - 20.015657424926758
</pre></table></code></div></div><h3 id="đa-luồng">Đa luồng</h3><p>Ở đây mình sử dụng 2 luồng để tăng tốc việc xử lý. 2 luồng đều hoàn thành công việc trong 10s đồng thời và việc này giảm 50% thời gian thực thi chương trình</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="n">t1</span> <span class="o">=</span> <span class="nc">Thread</span><span class="p">(</span><span class="n">target</span> <span class="o">=</span> <span class="n">io_bound</span><span class="p">,</span> <span class="n">args</span> <span class="o">=</span><span class="p">(</span><span class="n">SLEEP</span><span class="p">,</span> <span class="p">))</span>

<span class="n">t2</span> <span class="o">=</span> <span class="nc">Thread</span><span class="p">(</span><span class="n">target</span> <span class="o">=</span> <span class="n">io_bound</span><span class="p">,</span> <span class="n">args</span> <span class="o">=</span><span class="p">(</span><span class="n">SLEEP</span><span class="p">,</span> <span class="p">))</span>

<span class="n">t1</span><span class="p">.</span><span class="nf">start</span><span class="p">()</span>

<span class="n">t2</span><span class="p">.</span><span class="nf">start</span><span class="p">()</span>

<span class="n">t1</span><span class="p">.</span><span class="nf">join</span><span class="p">()</span>


<span class="n">t2</span><span class="p">.</span><span class="nf">join</span><span class="p">()</span>
</pre></table></code></div></div><p>Kết quả:</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>19327 <span class="k">*</span> MainProcess <span class="k">*</span> Thread-1         <span class="nt">---</span><span class="o">&gt;</span> Start sleeping...
19327 <span class="k">*</span> MainProcess <span class="k">*</span> Thread-2         <span class="nt">---</span><span class="o">&gt;</span> Start sleeping...
19327 <span class="k">*</span> MainProcess <span class="k">*</span> Thread-2         <span class="nt">---</span><span class="o">&gt;</span> Finished sleeping...
19327 <span class="k">*</span> MainProcess <span class="k">*</span> Thread-1         <span class="nt">---</span><span class="o">&gt;</span> Finished sleeping...
Time taken <span class="k">in </span>seconds - 10.010849714279175
</pre></table></code></div></div><h3 id="đa-tiến-trình">Đa tiến trình</h3><p>Trong trường hợp này mình sẽ tạo ra 2 tiến trình thực hiện song song hàm io_bound() trên và kết quả cũng tương tự phần đa luồng</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="n">p1</span> <span class="o">=</span> <span class="nc">Process</span><span class="p">(</span><span class="n">target</span> <span class="o">=</span> <span class="n">io_bound</span><span class="p">,</span> <span class="n">args</span> <span class="o">=</span><span class="p">(</span><span class="n">SLEEP</span><span class="p">,</span> <span class="p">))</span>

<span class="n">p2</span> <span class="o">=</span> <span class="nc">Process</span><span class="p">(</span><span class="n">target</span> <span class="o">=</span> <span class="n">io_bound</span><span class="p">,</span> <span class="n">args</span> <span class="o">=</span><span class="p">(</span><span class="n">SLEEP</span><span class="p">,</span> <span class="p">))</span>

<span class="n">p1</span><span class="p">.</span><span class="nf">start</span><span class="p">()</span>

<span class="n">p2</span><span class="p">.</span><span class="nf">start</span><span class="p">()</span>

<span class="n">p1</span><span class="p">.</span><span class="nf">join</span><span class="p">()</span>

<span class="n">p2</span><span class="p">.</span><span class="nf">join</span><span class="p">()</span>
</pre></table></code></div></div><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>19967 <span class="k">*</span> Process-1 <span class="k">*</span> MainThread         <span class="nt">---</span><span class="o">&gt;</span> Start sleeping...
19968 <span class="k">*</span> Process-2 <span class="k">*</span> MainThread         <span class="nt">---</span><span class="o">&gt;</span> Start sleeping...
19967 <span class="k">*</span> Process-1 <span class="k">*</span> MainThread         <span class="nt">---</span><span class="o">&gt;</span> Finished sleeping...
19968 <span class="k">*</span> Process-2 <span class="k">*</span> MainThread         <span class="nt">---</span><span class="o">&gt;</span> Finished sleeping...
Time taken <span class="k">in </span>seconds - 10.01881742477417
</pre></table></code></div></div><h2 id="thử-nghiệm-mô-hình-với-các-tác-vụ-cpu-bound">Thử nghiệm mô hình với các tác vụ CPU-bound</h2><p>Tương tự với phần trên mình gọi 2 lần hàm <code class="language-plaintext highlighter-rouge">cpu_bound()</code></p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nf">cpu_bound</span><span class="p">(</span><span class="n">COUNT</span><span class="p">)</span>
<span class="nf">cpu_bound</span><span class="p">(</span><span class="n">COUNT</span><span class="p">)</span>
</pre></table></code></div></div><p>Kết quả của việc thực hiện tuần tự</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>20153 <span class="k">*</span> MainProcess <span class="k">*</span> MainThread         <span class="nt">---</span><span class="o">&gt;</span> Start counting...
20153 <span class="k">*</span> MainProcess <span class="k">*</span> MainThread         <span class="nt">---</span><span class="o">&gt;</span> Finished counting...
20153 <span class="k">*</span> MainProcess <span class="k">*</span> MainThread         <span class="nt">---</span><span class="o">&gt;</span> Start counting...
20153 <span class="k">*</span> MainProcess <span class="k">*</span> MainThread         <span class="nt">---</span><span class="o">&gt;</span> Finished counting...
Time taken <span class="k">in </span>seconds - 20.83522891998291
</pre></table></code></div></div><h3 id="đa-luồng-1">Đa luồng</h3><p>Mình sẽ thử thực hiện chương trình trên với hai luồng để kiểm tra xem đối với các công việc cpu-bound thì liệu việc đa luồng trong Python có được cải thiện hay không.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="n">t1</span> <span class="o">=</span> <span class="nc">Thread</span><span class="p">(</span><span class="n">target</span> <span class="o">=</span> <span class="n">cpu_bound</span><span class="p">,</span> <span class="n">args</span> <span class="o">=</span><span class="p">(</span><span class="n">COUNT</span><span class="p">,</span> <span class="p">))</span>

<span class="n">t2</span> <span class="o">=</span> <span class="nc">Thread</span><span class="p">(</span><span class="n">target</span> <span class="o">=</span> <span class="n">cpu_bound</span><span class="p">,</span> <span class="n">args</span> <span class="o">=</span><span class="p">(</span><span class="n">COUNT</span><span class="p">,</span> <span class="p">))</span>

<span class="n">t1</span><span class="p">.</span><span class="nf">start</span><span class="p">()</span>

<span class="n">t2</span><span class="p">.</span><span class="nf">start</span><span class="p">()</span>

<span class="n">t1</span><span class="p">.</span><span class="nf">join</span><span class="p">()</span>

<span class="n">t2</span><span class="p">.</span><span class="nf">join</span><span class="p">()</span>
</pre></table></code></div></div><p>Kết quả cho thấy đối với các tác vụ CPU-bound thì việc lập trình đa luồng không cải thiện được tốc độ. Giải thích ở đây là do cơ chế GIL được trình bày ở trên chỉ cho phép trong một thời điểm chỉ có một luồng được chạy. Ở đây sau khi luồng 1 chạy thì GIL mới được giải phóng và luồng 2 mới được phép chạy.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>20338 <span class="k">*</span> MainProcess <span class="k">*</span> Thread-1         <span class="nt">---</span><span class="o">&gt;</span> Start counting...
20338 <span class="k">*</span> MainProcess <span class="k">*</span> Thread-2         <span class="nt">---</span><span class="o">&gt;</span> Start counting...
20338 <span class="k">*</span> MainProcess <span class="k">*</span> Thread-2         <span class="nt">---</span><span class="o">&gt;</span> Finished counting...
20338 <span class="k">*</span> MainProcess <span class="k">*</span> Thread-1         <span class="nt">---</span><span class="o">&gt;</span> Finished counting...
Time taken <span class="k">in </span>seconds - 20.36056351661682
</pre></table></code></div></div><h3 id="đa-tiến-trình-1">Đa tiến trình</h3><p>Đối với trường hợp đa tiến trình mình cũng sẽ thử nghiệm tương tự</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="n">p1</span> <span class="o">=</span> <span class="nc">Process</span><span class="p">(</span><span class="n">target</span> <span class="o">=</span> <span class="n">cpu_bound</span><span class="p">,</span> <span class="n">args</span> <span class="o">=</span><span class="p">(</span><span class="n">COUNT</span><span class="p">,</span> <span class="p">))</span>

<span class="n">p2</span> <span class="o">=</span> <span class="nc">Process</span><span class="p">(</span><span class="n">target</span> <span class="o">=</span> <span class="n">cpu_bound</span><span class="p">,</span> <span class="n">args</span> <span class="o">=</span><span class="p">(</span><span class="n">COUNT</span><span class="p">,</span> <span class="p">))</span>

<span class="n">p1</span><span class="p">.</span><span class="nf">start</span><span class="p">()</span>

<span class="n">p2</span><span class="p">.</span><span class="nf">start</span><span class="p">()</span>

<span class="n">p1</span><span class="p">.</span><span class="nf">join</span><span class="p">()</span>

<span class="n">p2</span><span class="p">.</span><span class="nf">join</span><span class="p">()</span>

<span class="n">end</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span>
</pre></table></code></div></div><p>Ở đây kết quả đã được cải thiện đáng kể, tốc độ thực thi giảm gần 50%. Tiến trình chính chia thành 2 tiến trình con chạy song song trên các core CPU. Mỗi tiến trình có một luồng chính riêng là MainThread</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>20556 <span class="k">*</span> Process-1 <span class="k">*</span> MainThread         <span class="nt">---</span><span class="o">&gt;</span> Start counting...
20557 <span class="k">*</span> Process-2 <span class="k">*</span> MainThread         <span class="nt">---</span><span class="o">&gt;</span> Start counting...
20557 <span class="k">*</span> Process-2 <span class="k">*</span> MainThread         <span class="nt">---</span><span class="o">&gt;</span> Finished counting...
20556 <span class="k">*</span> Process-1 <span class="k">*</span> MainThread         <span class="nt">---</span><span class="o">&gt;</span> Finished counting...
Time taken <span class="k">in </span>seconds - 11.20688509941101
</pre></table></code></div></div><h1 id="4-kết-luận">4. Kết luận</h1><p>Trong Python thì việc sử dụng lập trình đa tiến trình sẽ giúp cải thiện tốc độ của chương trình đối với cả CPU-bound và IO-bound tuy nhiên cũng cần phải chú ý vì đa tiến trình tức là các tiến trình riêng biệt sử dụng thêm tài nguyên ram và CPU.</p><p>Đối với lập trình đa luồng do cơ chế GIL thì các tác vụ CPU-bound sẽ không cải thiện được vấn đề gì vì thực chất chỉ có 1 luồng được phép chạy và việc sử dụng có khi còn giảm hiệu quả. Tuy nhiên cũng có thể sử dụng trong trường hợp IO-bound, ở đây có thể lấy ví dụ đa luồng trong việc crawl web. Khi gửi request đến một trang thì thời gian IO luôn chiếm phần lớn, khi đó CPU nhàn rỗi có thể cho luồng khác sử dụng vì lúc này luồng phía trước không còn GIL nữa, luồng mới sẽ được sử dụng. Thực chất đây là lập trình đồng thời (concurrency).</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://raw.githubusercontent.com/demanejar/image-collection/refs/heads/main/PythonMultiThreadMultiProcessing/Threading.3eef48da829e.png" alt="" /></p><h1 id="tham-khảo">Tham khảo</h1><p><a href="https://www.geeksforgeeks.org/difference-between-multithreading-vs-multiprocessing-in-python/">Difference between multithreading and multiprocessing in Python</a> <a href="https://www.toptal.com/python/beginners-guide-to-concurrency-and-parallelism-in-python">Beginers guide to concurrency and parallellism in Python</a> <a href="https://nguyentruonglong.net/co-che-global-interpreter-lock-trong-python.html">Cơ chế GIL trong Python</a> <a href="https://granulate.io/introduction-to-the-infamous-python-gil/">Introduction to infamous Python GIL</a> <a href="https://www.scaler.com/topics/multithreading-in-python/">Multithreading in Python</a></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/blogging/'>Blogging</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/python/" class="post-tag no-text-decoration" >Python</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Đa luồng và đa tiến trình trong Python - De Manejar&url=https://demanejar.github.io/posts/Multithread-Multiprocess-in-Python/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Đa luồng và đa tiến trình trong Python - De Manejar&u=https://demanejar.github.io/posts/Multithread-Multiprocess-in-Python/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Đa luồng và đa tiến trình trong Python - De Manejar&url=https://demanejar.github.io/posts/Multithread-Multiprocess-in-Python/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/k8s/">Tìm hiểu tổng quan k8s</a><li><a href="/posts/add-proxy-to-scrapy-project/">Cấu hình proxy cho project Scrapy</a><li><a href="/posts/crawl-1000-website-new-with-scrapy/">Crawl 1000 trang báo với Scrapy và MySQL</a><li><a href="/posts/php-scraper/">PHP Scraper</a><li><a href="/posts/scrapy-shell/">Giới thiệu Scrapy Shell</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/bigdata/">Bigdata</a> <a class="post-tag" href="/tags/spark/">Spark</a> <a class="post-tag" href="/tags/crawler/">Crawler</a> <a class="post-tag" href="/tags/hdfs/">HDFS</a> <a class="post-tag" href="/tags/scrapy/">Scrapy</a> <a class="post-tag" href="/tags/hadoop/">Hadoop</a> <a class="post-tag" href="/tags/apache-hadoop/">Apache Hadoop</a> <a class="post-tag" href="/tags/ubuntu/">Ubuntu</a> <a class="post-tag" href="/tags/spark-sql/">Spark SQL</a> <a class="post-tag" href="/tags/alonhadat/">alonhadat</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/redis-101-(part-1)/"><div class="card-body"> <span class="timeago small" > Jun 10, 2021 <i class="unloaded">2021-06-10T20:52:00+07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Redis 101 (Part I)</h3><div class="text-muted small"><p> Tổng quan Trong thời gian học môn Lưu trữ và xử lý dữ liệu lớn ở trường, mình có được nghe qua về redis. Đây là một cơ sở dữ liệu dạng NoSQL. Khác với các cơ sở dữ liệu khác thì đây là một dạng lư...</p></div></div></a></div><div class="card"> <a href="/posts/airflow-ha/"><div class="card-body"> <span class="timeago small" > Feb 18, 2024 <i class="unloaded">2024-02-18T20:52:00+07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Hướng dẫn Airflow HA</h3><div class="text-muted small"><p> Trong bài này mình sẽ hướng dẫn cài đặt Airflow và cài HA cho nó. môi trường sử dụng là máy ảo virtualbox tạo 2 máy ảo với địa chỉ cố định, add user và cập quyền ssh từ host 1 2 3 4 5 6 7 8 ...</p></div></div></a></div><div class="card"> <a href="/posts/Kafka-In-Depth/"><div class="card-body"> <span class="timeago small" > Jul 8, 2021 <i class="unloaded">2021-07-08T20:52:00+07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Kafka In Depth</h3><div class="text-muted small"><p> Trong quá trình làm bài tập lớn môn lưu trữ và xử lý dữ liệu lớn ở trường mình có biết đến kafka và sử dụng cho project của mình. Tuy nhiên lúc đó mình mới chỉ biết đơn giản nó là một message queue...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/spark-streaming/" class="btn btn-outline-primary" prompt="Older"><p>Spark Streaming</p></a> <a href="/posts/socket-stream/" class="btn btn-outline-primary" prompt="Newer"><p>Project Socket Stream với Spark Streaming</p></a></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/DeManejar">demanejar</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div></div><script type="text/javascript"> var links = document.links; for (var i = 0, linksLength = links.length; i < linksLength; i++) { if (links[i].hostname != window.location.hostname) { links[i].target = '_blank'; } } </script></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/bigdata/">Bigdata</a> <a class="post-tag" href="/tags/spark/">Spark</a> <a class="post-tag" href="/tags/crawler/">Crawler</a> <a class="post-tag" href="/tags/hdfs/">HDFS</a> <a class="post-tag" href="/tags/scrapy/">Scrapy</a> <a class="post-tag" href="/tags/hadoop/">Hadoop</a> <a class="post-tag" href="/tags/apache-hadoop/">Apache Hadoop</a> <a class="post-tag" href="/tags/ubuntu/">Ubuntu</a> <a class="post-tag" href="/tags/spark-sql/">Spark SQL</a> <a class="post-tag" href="/tags/alonhadat/">alonhadat</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { let initTheme = "default"; if ($("html[mode=dark]").length > 0 || ($("html[mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://demanejar.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
